<!DOCTYPE html>
<html lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.5/axios.min.js" integrity="sha512-nnNHpffPSgINrsR8ZAIgFUIMexORL5tPwsfktOTxVYSv+AUAILuFYWES8IHl+hhIhpFGlKvWFiz9ZEusrPcSBQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{{> head}}

<body class="sb-nav-fixed">
    {{> staffHeader}}
    <div class="modal-dialog modal-lg" role="document" style="margin-top: 5%; margin-left: 20%">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create a Idea</h2>
            </div>
            <div class="modal-body">
                <div class="py-1">
                    <form class="form" method="POST" action="/staff/doAddIdea">
                        <div class="row">
                            <div class="col">
                                <label>Category</label>
                                <select name="idCategory" id="categoryId">

                                </select>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <input type="hidden" name="ideaName" value="{{idCategory}}">
                                    <label>Idea Name</label>
                                    <input class="form-control" type="text" name="name" placeholder="Idea Name"
                                        required />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label>File attach</label>
                                    <input class="form-control" type="file" name="files" placeholder="Idea Name"
                                        required />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-check form-check-inline col-md-5">
                                    <label class="form-check-label" for="inlineCheckbox1">Annonymously</label>
                                    <input class="form-check-input" type="radio" name="annonymously"
                                        id="inlineCheckbox1" value="true"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col d-flex justify-content-end">
                                <button class="btn btn-primary" type="submit">Save</button>
                                <a href="/staff/viewCategoryDetail?id={{idCategory}}" class="btn btn-warning">Cancel</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script>

    async function getCategory() {
        const res= await axios({
            url: window.location.origin+ "/admin/getCategory",
            method: "get"
        })
        const result= await res.data
        document.getElementById("categoryId").innerHTML= result?.map(item=> `
            <option value="${item._id}">${item.name}</option>
        `)
        return result
    }
    getCategory()
</script>

</html>